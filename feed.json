{
    "version": "https://jsonfeed.org/version/1",
    "title": "通幽子怀",
    "subtitle": "",
    "icon": "http://codebglh.github.io/images/favicon.ico",
    "description": "",
    "home_page_url": "http://codebglh.github.io",
    "items": [
        {
            "id": "http://codebglh.github.io/python/scarpy/",
            "url": "http://codebglh.github.io/python/scarpy/",
            "title": "scarpy框架",
            "date_published": "2021-03-03T09:29:25.000Z",
            "content_html": "<h6 id=\"1-安装scrapy框架\"><a class=\"markdownIt-Anchor\" href=\"#1-安装scrapy框架\">#</a> 1、安装 scrapy 框架</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip install scrapy</pre></td></tr></table></figure><h6 id=\"2-创建虚拟环境\"><a class=\"markdownIt-Anchor\" href=\"#2-创建虚拟环境\">#</a> 2、创建虚拟环境</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>python <span class=\"token operator\">-</span>m venv <span class=\"token operator\">**</span><span class=\"token operator\">*</span><span class=\"token comment\">#为名字</span></pre></td></tr></table></figure><h6 id=\"3-创建一个爬虫框架\"><a class=\"markdownIt-Anchor\" href=\"#3-创建一个爬虫框架\">#</a> 3、创建一个爬虫框架</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scrapy startproject xxxx<span class=\"token punctuation\">(</span>项目名字<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h6 id=\"4-创建一个爬虫\"><a class=\"markdownIt-Anchor\" href=\"#4-创建一个爬虫\">#</a> 4、创建一个爬虫</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cd xxxx<span class=\"token punctuation\">(</span>项目名字<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scrapy genspider xxx（爬虫名字） xxx（网站域名）   <span class=\"token comment\">#创建爬虫</span></pre></td></tr></table></figure><h6 id=\"5-修改settingpy文件\"><a class=\"markdownIt-Anchor\" href=\"#5-修改settingpy文件\">#</a> 5、修改 setting.py 文件</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>USER_AGENT <span class=\"token operator\">=</span> <span class=\"token comment\">#请求头</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>LOG_LEVEL <span class=\"token operator\">=</span> <span class=\"token string\">\"WARNING\"</span><span class=\"token comment\">#报错等级提高简单错误不显示</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ROBOTSTXT_OBEY <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token comment\">#是否遵守爬虫协议改为否 (原因你懂的)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>CONCURRENT_REQUESTS <span class=\"token comment\">#一次允许的最大请求数</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>DOWNLOAD_DELAY <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token comment\">#设置下载延迟时间，因而使得爬虫更像是人的行为，避免 IP 被屏蔽</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>DOWNLOADER_MIDDLEWARES <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>   <span class=\"token string\">'xymtest.middlewares.XymtestDownloaderMiddleware'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">543</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">#设置下载中间键</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ITEM_PIPELINES <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>   <span class=\"token string\">'xymtest.pipelines.XymtestPipeline'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token comment\">#设置管道</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>HTTPCACHE_ENABLED <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>HTTPCACHE_EXPIRATION_SECS <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>HTTPCACHE_DIR <span class=\"token operator\">=</span> <span class=\"token string\">'httpcache'</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>HTTPCACHE_IGNORE_HTTP_CODES <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>HTTPCACHE_STORAGE <span class=\"token operator\">=</span> <span class=\"token string\">'scrapy.extensions.httpcache.FilesystemCacheStorage'</span><span class=\"token comment\">#取消最后几行的注释</span></pre></td></tr></table></figure><h6 id=\"6-修改itemspy文件\"><a class=\"markdownIt-Anchor\" href=\"#6-修改itemspy文件\">#</a> 6、修改 items.py 文件</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>url<span class=\"token operator\">=</span>scrapy<span class=\"token punctuation\">.</span>Field<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h6 id=\"7-修改pipelinespy文件\"><a class=\"markdownIt-Anchor\" href=\"#7-修改pipelinespy文件\">#</a> 7、修改 pipelines.py 文件</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>下载文件</pre></td></tr></table></figure><h6 id=\"8-编写爬虫文件\"><a class=\"markdownIt-Anchor\" href=\"#8-编写爬虫文件\">#</a> 8、编写爬虫文件</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> scrapy</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> tu<span class=\"token punctuation\">.</span>items <span class=\"token keyword\">import</span> TuItem</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># import Request</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">TSpider</span><span class=\"token punctuation\">(</span>scrapy<span class=\"token punctuation\">.</span>Spider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    name <span class=\"token operator\">=</span> <span class=\"token string\">'t'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    allowed_domains <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'wallhaven.cc'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    start_urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https://wallhaven.cc/toplist?page=&#123;a&#125;'</span> <span class=\"token keyword\">for</span> a <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        y <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//body/main/div/section/ul'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> y<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            k<span class=\"token operator\">=</span>i<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./li/figure/a/@href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            item <span class=\"token operator\">=</span> TuItem<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            item<span class=\"token punctuation\">[</span><span class=\"token string\">\"url\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>k</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token keyword\">yield</span> Request<span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span> meta<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'item'</span><span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> callback <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>parse1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">parse1</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        item <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>meta<span class=\"token punctuation\">[</span><span class=\"token string\">'item'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        y<span class=\"token operator\">=</span>response<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//body/main/section/div/img/@src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">yield</span> item</pre></td></tr></table></figure><h6 id=\"9-安装xpath谷歌插件xpath语法\"><a class=\"markdownIt-Anchor\" href=\"#9-安装xpath谷歌插件xpath语法\">#</a> 9、安装 xpath 谷歌插件 xpath 语法</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>chrome<span class=\"token punctuation\">.</span>google<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>webstore<span class=\"token operator\">/</span>detail<span class=\"token operator\">/</span>hgimnogjllphhhkhlmebbmlgjoejdpjl</pre></td></tr></table></figure><h6 id=\"10-运行爬虫\"><a class=\"markdownIt-Anchor\" href=\"#10-运行爬虫\">#</a> 10、运行爬虫</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cd xxxx<span class=\"token punctuation\">(</span>项目名字<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>scrapy crawl xx<span class=\"token punctuation\">(</span>爬虫名字<span class=\"token punctuation\">)</span><span class=\"token comment\">#运行爬虫</span></pre></td></tr></table></figure><h6 id=\"11-请求头包\"><a class=\"markdownIt-Anchor\" href=\"#11-请求头包\">#</a> 11、请求头包</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip install fake_useragent <span class=\"token comment\">#安装包</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> fake_useragent <span class=\"token keyword\">import</span> UserAgent<span class=\"token comment\">#导入包</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>s<span class=\"token operator\">=</span>UserAgent<span class=\"token punctuation\">(</span>verify_ssl<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>random<span class=\"token comment\">#运用包</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> fake_useragent <span class=\"token keyword\">import</span> UserAgent <span class=\"token comment\"># 版本 '0.1.11'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>s<span class=\"token operator\">=</span>UserAgent<span class=\"token punctuation\">(</span>verify_ssl<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>random</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h6 id=\"11-二级访问链接\"><a class=\"markdownIt-Anchor\" href=\"#11-二级访问链接\">#</a> 11、二级访问链接</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">TSpider</span><span class=\"token punctuation\">(</span>scrapy<span class=\"token punctuation\">.</span>Spider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    name <span class=\"token operator\">=</span> <span class=\"token string\">'t'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    allowed_domains <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'wallhaven.cc'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    start_urls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https://wallhaven.cc/toplist?page=&#123;a&#125;'</span> <span class=\"token keyword\">for</span> a <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">135</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        y <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//body/main/div/section/ul'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> y<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            k<span class=\"token operator\">=</span>i<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'./li/figure/a/@href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            o<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token keyword\">for</span> x <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                a<span class=\"token operator\">=</span>k<span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">]</span>   </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token keyword\">yield</span> scrapy<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> callback <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>parse_detail<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">parse_detail</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        y<span class=\"token operator\">=</span>response<span class=\"token punctuation\">.</span>xpath<span class=\"token punctuation\">(</span><span class=\"token string\">'//body/main/section/div/img/@src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>extract<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        item <span class=\"token operator\">=</span> TuItem<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        item<span class=\"token punctuation\">[</span><span class=\"token string\">\"url\"</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>y</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">yield</span> item</pre></td></tr></table></figure><h6 id=\"12-图片下载中间件自带settingspyitemspy\"><a class=\"markdownIt-Anchor\" href=\"#12-图片下载中间件自带settingspyitemspy\">#</a> 12、<span class=\"exturl\" data-url=\"aHR0cDovL3huLS1zZXR0aW5ncy10MzlsNGtoMGYzeTRidGl2ZG44ZHg5NmJybjViNTd3LnB5\">图片下载中间件自带 settings.py</span>，<span class=\"exturl\" data-url=\"aHR0cDovL2l0ZW1zLnB5\">items.py</span></h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ITEM_PIPELINES<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token string\">'scrapy.pipelines.images.ImagesPipeline'</span><span class=\"token punctuation\">:</span><span class=\"token number\">201</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>IMAGES_STORE<span class=\"token operator\">=</span><span class=\"token operator\">**</span> <span class=\"token comment\">#图片路径</span></pre></td></tr></table></figure><h6 id=\"13-数据存到数据库\"><a class=\"markdownIt-Anchor\" href=\"#13-数据存到数据库\">#</a> 13、数据存到数据库</h6>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">TuPipeline1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\"># 连接 MySQL 数据库</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        self<span class=\"token punctuation\">.</span>connect<span class=\"token operator\">=</span>pymysql<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span>user<span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">,</span>password<span class=\"token operator\">=</span><span class=\"token string\">'liuhonga'</span><span class=\"token punctuation\">,</span>db<span class=\"token operator\">=</span><span class=\"token string\">'tupian'</span><span class=\"token punctuation\">,</span>port<span class=\"token operator\">=</span><span class=\"token number\">3306</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        self<span class=\"token punctuation\">.</span>cursor<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">process_item</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">,</span> spider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\"># 往数据库里面写入数据</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        self<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span><span class=\"token string\">'insert into tupian(tupian)VALUES (\"&#123;&#125;\")'</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">[</span><span class=\"token string\">'image_urls'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        self<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\"># 关闭数据库</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">close_spider</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>spider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        self<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        self<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h5 id=\"14\"><a class=\"markdownIt-Anchor\" href=\"#14\">#</a> 14</h5>\n<h1 id=\"导入pymysql模块\"><a class=\"markdownIt-Anchor\" href=\"#导入pymysql模块\">#</a> 导入 pymysql 模块</h1>\n<p>import pymysql</p>\n<h1 id=\"连接database\"><a class=\"markdownIt-Anchor\" href=\"#连接database\">#</a> 连接 database</h1>\n<p>conn = pymysql.connect(host=“localhost”, user=“root”,password=“liuhonga”,database=“img”,charset=“utf8”)</p>\n<h1 id=\"得到一个可以执行sql语句的光标对象\"><a class=\"markdownIt-Anchor\" href=\"#得到一个可以执行sql语句的光标对象\">#</a> 得到一个可以执行 SQL 语句的光标对象</h1>\n<p>cursor = conn.cursor()</p>\n<h1 id=\"查询数据的sql语句\"><a class=\"markdownIt-Anchor\" href=\"#查询数据的sql语句\">#</a> 查询数据的 SQL 语句</h1>\n<p>sql = “SELECT url,_image from img;”</p>\n<h1 id=\"执行sql语句\"><a class=\"markdownIt-Anchor\" href=\"#执行sql语句\">#</a> 执行 SQL 语句</h1>\n<p>cursor.execute(sql)</p>\n<h1 id=\"获取多条查询数据\"><a class=\"markdownIt-Anchor\" href=\"#获取多条查询数据\">#</a> 获取多条查询数据</h1>\n<p>ret = cursor.fetchall()<br>\ncursor.close()<br>\nconn.close()<br>\nprint(ret)</p>\n<p>显示 Mac 隐藏文件的命令</p>\n<p>defaults write com.apple.finder AppleShowAllFiles -bool true<br>\nkillall Finder</p>\n<p>隐藏 Mac 隐藏文件的命令<br>\n defaults write com.apple.finder AppleShowAllFiles -bool false<br>\nkillall Finder</p>\n",
            "tags": [
                "爬虫"
            ]
        },
        {
            "id": "http://codebglh.github.io/hexo/%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91/",
            "url": "http://codebglh.github.io/hexo/%E4%B8%BB%E9%A2%98%E5%BC%80%E5%8F%91/",
            "title": "主题开发",
            "date_published": "2021-03-03T01:06:25.000Z",
            "content_html": "<h1 id=\"hexo主题开发\"><a class=\"markdownIt-Anchor\" href=\"#hexo主题开发\">#</a> hexo 主题开发</h1>\n<h3 id=\"1hexo-结构\"><a class=\"markdownIt-Anchor\" href=\"#1hexo-结构\">#</a> 1.hexo 结构</h3>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>├── _config.yml       // 总体的配置文件</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>├── node_modules      // NodeJs 所依赖的包，后期也可以自己添加插件</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>├── package<span class=\"token punctuation\">-</span>lock.json // 支持 hexo 运行的 NodeJs 包</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>├── package.json      // 自定义的 NodeJs 包</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>├── scaffolds         // Hexo Markdown 加载时的关键字，如data<span class=\"token punctuation\">,</span>title等<span class=\"token punctuation\">,</span>它会在启动的时候默认加载</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>├── source            // md 源文件目录</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>└── themes            // 主题文件夹</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    └── landscape     // 默认主题</pre></td></tr></table></figure><h3 id=\"2主题结构\"><a class=\"markdownIt-Anchor\" href=\"#2主题结构\">#</a> 2. 主题结构</h3>\n<pre><code>    └── bg\t                // 自建的主题目录\n        ├── _config.yml     // 主题配置文件\n        ├── layout          // 主要构造 html 的模板\n        │   ├── index.ejs   // 主页模板\n        │   ├── layout.ejs  // 布局模板\n        │   └── post.ejs    // md 编译成 html 后的文件模板\n        └── source          // 静态资源文件目录\n            ├── css         // css 样式目录\n            └── js          // JavaScript 脚本目录\n</code></pre>\n<h3 id=\"3\"><a class=\"markdownIt-Anchor\" href=\"#3\">#</a> 3.</h3>\n<h3 id=\"4\"><a class=\"markdownIt-Anchor\" href=\"#4\">#</a> 4.</h3>\n<h3 id=\"5\"><a class=\"markdownIt-Anchor\" href=\"#5\">#</a> 5.</h3>\n<h3 id=\"6\"><a class=\"markdownIt-Anchor\" href=\"#6\">#</a> 6.</h3>\n<h3 id=\"7\"><a class=\"markdownIt-Anchor\" href=\"#7\">#</a> 7.</h3>\n<h3 id=\"8\"><a class=\"markdownIt-Anchor\" href=\"#8\">#</a> 8.</h3>\n<h3 id=\"9\"><a class=\"markdownIt-Anchor\" href=\"#9\">#</a> 9.</h3>\n<p>显示 Mac 隐藏文件的命令</p>\n<p>defaults write com.apple.finder AppleShowAllFiles -bool true<br>\nkillall Finder</p>\n<p>隐藏 Mac 隐藏文件的命令<br>\n defaults write com.apple.finder AppleShowAllFiles -bool false<br>\nkillall Finder</p>\n",
            "tags": [
                "博客",
                "Hexo",
                "教程"
            ]
        },
        {
            "id": "http://codebglh.github.io/python/python.pip/",
            "url": "http://codebglh.github.io/python/python.pip/",
            "title": "pip下载更改数据源",
            "date_published": "2021-03-03T00:58:25.000Z",
            "content_html": "<h1 id=\"mac-修改pip-镜像源\"><a class=\"markdownIt-Anchor\" href=\"#mac-修改pip-镜像源\">#</a> Mac 修改 pip 镜像源</h1>\n<ol>\n<li>进入根目录： <code>cd ~/</code></li>\n<li>进入.pip 目录  <code>cd .pip</code></li>\n<li>如果不存在文件夹就新建 <code>mkdir .pip</code></li>\n<li>进入  <code>cd .pip</code></li>\n<li>创建 pip.conf 文件  <code>touch pip.conf</code></li>\n<li>修改： <code>vim pip.conf</code></li>\n</ol>\n<h2 id=\"暂时\"><a class=\"markdownIt-Anchor\" href=\"#暂时\">#</a> 暂时</h2>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip install<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span> <span class=\"token operator\">-</span>i https<span class=\"token operator\">:</span><span class=\"token comment\">//pypi.douban.com/simple</span></pre></td></tr></table></figure><h2 id=\"永久修改内容\"><a class=\"markdownIt-Anchor\" href=\"#永久修改内容\">#</a> 永久修改内容：</h2>\n<figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token keyword\">global</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>index<span class=\"token operator\">-</span>url<span class=\"token operator\">=</span>https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>mirrors<span class=\"token punctuation\">.</span>aliyun<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>pypi<span class=\"token operator\">/</span>simple<span class=\"token operator\">/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">install</span></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>trusted<span class=\"token operator\">-</span>host<span class=\"token operator\">=</span>mirrors<span class=\"token punctuation\">.</span>aliyun<span class=\"token punctuation\">.</span>com</pre></td></tr></table></figure><figure class=\"highlight csharp\"><figcaption data-lang=\"C#\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token keyword\">global</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>timeout <span class=\"token operator\">=</span> <span class=\"token number\">6000</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>index<span class=\"token operator\">-</span>url <span class=\"token operator\">=</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>pypi<span class=\"token punctuation\">.</span>douban<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>simple<span class=\"token operator\">/</span> </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">install</span></span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>use<span class=\"token operator\">-</span>mirrors <span class=\"token operator\">=</span> <span class=\"token class-name\">true</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>mirrors <span class=\"token operator\">=</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>pypi<span class=\"token punctuation\">.</span>douban<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>simple<span class=\"token operator\">/</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>trusted<span class=\"token operator\">-</span>host <span class=\"token operator\">=</span> pypi<span class=\"token punctuation\">.</span>douban<span class=\"token punctuation\">.</span>com</pre></td></tr></table></figure><h1 id=\"国内源\"><a class=\"markdownIt-Anchor\" href=\"#国内源\">#</a> 国内源：</h1>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHA6Ly9weXBpLmRvdWJhbi5jb20v\">http://pypi.douban.com/</span> 豆瓣</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHA6Ly9weXBpLmh1c3R1bmlxdWUuY29tLw==\">http://pypi.hustunique.com/</span> 华中理工大学</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHA6Ly9weXBpLnNkdXRsaW51eC5vcmcv\">http://pypi.sdutlinux.org/</span> 山东理工大学</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmppYW5zaHUuY29tLz90PWh0dHA6Ly9weXBpLm1pcnJvcnMudXN0Yy5lZHUuY24v\">http://pypi.mirrors.ustc.edu.cn/</span> 中国科学技术大学</li>\n</ul>\n<p>列出当前安装的包：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token builtin\">list</span></pre></td></tr></table></figure><p>列出可升级的包：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token builtin\">list</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>outdate</pre></td></tr></table></figure><p>升级一个包：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 install <span class=\"token operator\">-</span><span class=\"token operator\">-</span>upgrade requests  <span class=\"token operator\">//</span> mac<span class=\"token punctuation\">,</span>linux<span class=\"token punctuation\">,</span>unix 在命令前加 sudo <span class=\"token operator\">-</span>H</pre></td></tr></table></figure><p>升级所有可升级的包：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ pip3 freeze <span class=\"token operator\">-</span><span class=\"token operator\">-</span>local <span class=\"token operator\">|</span> grep <span class=\"token operator\">-</span>v <span class=\"token string\">'^-e'</span> <span class=\"token operator\">|</span> cut <span class=\"token operator\">-</span>d <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>f <span class=\"token number\">1</span>  <span class=\"token operator\">|</span> xargs <span class=\"token operator\">-</span>n1 pip3 install <span class=\"token operator\">-</span>U</pre></td></tr></table></figure><figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip3 <span class=\"token builtin\">list</span> <span class=\"token operator\">-</span>o <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token builtin\">format</span> legacy<span class=\"token operator\">|</span>awk <span class=\"token string\">'&#123;print $1&#125;'</span>` <span class=\"token punctuation\">;</span> do pip install <span class=\"token operator\">-</span><span class=\"token operator\">-</span>upgrade $i<span class=\"token punctuation\">;</span> done</pre></td></tr></table></figure>",
            "tags": [
                "爬虫"
            ]
        },
        {
            "id": "http://codebglh.github.io/python/mysql%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6/",
            "url": "http://codebglh.github.io/python/mysql%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6/",
            "title": "数据库管理",
            "date_published": "2021-03-03T00:53:25.000Z",
            "content_html": "<h1 id=\"mac-上的-mysql-管理工具-sequel-pro\"><a class=\"markdownIt-Anchor\" href=\"#mac-上的-mysql-管理工具-sequel-pro\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwNjI1NTkyMw==\">Mac 上的 MySQL 管理工具 – Sequel Pro</span></h1>\n<p>Sequel Pro 是 Mac 用户常用的 MySQL 管理软件，属于开源项目 CocoaMySQL 的一个分支。它支持包括索引在内的所有表管理功能，支持 MySQL 视图，可以同时使用多个窗口来操作多个数据库 / 表。完全可以媲美大家熟悉的 phpMyadmin。</p>\n<p>Sequel Pro 的部分特性如下：</p>\n<ol>\n<li>操作快速，简单。通过简单的几个参数设定即可连接本地或远程 MySQL。</li>\n<li>支持多窗口操作。在不同的个窗口中，对多数据库实施操作。</li>\n<li>SQL 语句的语法彩色、加亮显示。</li>\n<li>SQL 语句的关键字、表名、字段名的自动完成。</li>\n<li>支持 30 多种不同的字符编码。</li>\n<li>快速导入 / 恢复、导出 / 备份 SQL 及 CSV 格式的数据。</li>\n<li>兼容 MySQL3、4、5。</li>\n<li>支持在 MAMP/XAMP 架构上连接数据库，支持 SSH 连接模式；</li>\n<li>免费使用，当然，如果你觉得不错，可以 Donate 支持一下作者。</li>\n</ol>\n<h2 id=\"通过-root-连接数据库\"><a class=\"markdownIt-Anchor\" href=\"#通过-root-连接数据库\">#</a> 通过 root 连接数据库</h2>\n<p>新建数据库和用户需要用到数据库的 root 用户权限，所以，我们用 root 进行登录，如下图：</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApCt\" alt=\"clipboard.png\"></p>\n<h2 id=\"建立数据库\"><a class=\"markdownIt-Anchor\" href=\"#建立数据库\">#</a> 建立数据库</h2>\n<p>点击  <code>Choose Database</code> -&gt;  <code>Add Database</code>  创建数据库</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApBQ\" alt=\"clipboard.png\"></p>\n<p>字符集选择默认的  <code>utf-8</code>  即可。</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApBR\" alt=\"clipboard.png\"></p>\n<h2 id=\"建立数据库用户\"><a class=\"markdownIt-Anchor\" href=\"#建立数据库用户\">#</a> 建立数据库用户</h2>\n<p>点击右上角 <code>User</code> ，弹出下面用户操作对话框，建立 web 用户</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApBU\" alt=\"clipboard.png\"></p>\n<p>给刚才新建的  <code>laravel</code>  数据库赋予权限，此处权限全选了，大家也可以有目的的选择权限：<br>\n<img data-src=\"https://segmentfault.com/img/bVApBV\" alt=\"clipboard.png\"></p>\n<h2 id=\"用新建-web-用户连接-laravel-数据库\"><a class=\"markdownIt-Anchor\" href=\"#用新建-web-用户连接-laravel-数据库\">#</a> 用新建 web 用户连接 laravel 数据库</h2>\n<p>首先，退出用 root 登陆的 sequel pro，再重新打开。</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApB1\" alt=\"clipboard.png\"></p>\n<ol>\n<li>如果非新建数据库界面，可以点击 <code>1</code>  添加收藏夹，下次可以直接点击该处进行连接；</li>\n<li>默认数据库连接方式为 <code>Standard</code>  标准模式，大家也可以选用 <code>Socket</code>  或 <code>SSH</code>  方式。选好方式，按照提示输入服务器、用户名、密码和数据库名，若端口有修改，输入端口号；</li>\n<li>点 <code>3</code>   <code>Add to Favorites</code>  则在 <code>4</code>  处会新增一个数据库连接收藏，点 <code>Save changes</code>  则保存到当前收藏；</li>\n<li>点击 <code>5</code>   <code>Connect</code>  连接数据库。</li>\n</ol>\n<h2 id=\"增加-编辑-删除数据表\"><a class=\"markdownIt-Anchor\" href=\"#增加-编辑-删除数据表\">#</a> 增加、编辑、删除数据表</h2>\n<p>这部分和 phpMyadmin 等都类似，就不展开来介绍了，大概功能区如下图：</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApB8\" alt=\"clipboard.png\"></p>\n<h2 id=\"删除数据库\"><a class=\"markdownIt-Anchor\" href=\"#删除数据库\">#</a> 删除数据库</h2>\n<p>貌似没有图形化删除数据库的地方，不过可以在 <code>Query</code>  选项下，执行</p>\n<pre><code>drop database dbname\n</code></pre>\n<p>进行删除，下面以删除 laravel 数据库为例，执行后，状态栏显示无错误，右上角数据库状态回到  <code>choose database</code> 。点开就会看到已找不到 laravel 数据库。</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApBP\" alt=\"clipboard.png\"></p>\n<h2 id=\"用-laravel-的-artisan-工具建立和更新数据表\"><a class=\"markdownIt-Anchor\" href=\"#用-laravel-的-artisan-工具建立和更新数据表\">#</a> 用 laravel 的 artisan 工具建立和更新数据表</h2>\n<h3 id=\"laravel-连接配置\"><a class=\"markdownIt-Anchor\" href=\"#laravel-连接配置\">#</a> laravel 连接配置</h3>\n<p>找到项目  <code>.env</code>  文件，修改下面几个参数</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApCj\" alt=\"clipboard.png\"></p>\n<h3 id=\"migrate-文件编辑\"><a class=\"markdownIt-Anchor\" href=\"#migrate-文件编辑\">#</a> migrate 文件编辑</h3>\n<p>找到 database/migrations 目录，查看或编辑目录下的 migrate 文件</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApCk\" alt=\"clipboard.png\"></p>\n<p>一般内容如下所示，调整为你需要的内容即可：</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApCm\" alt=\"clipboard.png\"></p>\n<h3 id=\"命令行执行-migrate-操作\"><a class=\"markdownIt-Anchor\" href=\"#命令行执行-migrate-操作\">#</a> 命令行执行 migrate 操作</h3>\n<p>命令行模式进入项目根目录，执行下面命令，则数据库就会按照几个 migrate 文件要求，执行数据库操作。</p>\n<pre><code>php artisan migrate\n</code></pre>\n<h3 id=\"数据库查看-migrate-命令执行结果\"><a class=\"markdownIt-Anchor\" href=\"#数据库查看-migrate-命令执行结果\">#</a> 数据库查看 migrate 命令执行结果</h3>\n<p>我们用 sequel pro 连接数据库，可以看到操作后如下：</p>\n<p><img data-src=\"https://segmentfault.com/img/bVApCo\" alt=\"clipboard.png\"></p>\n<p>可见数据库和用户建立成功，项目已能正常连接数据库。</p>\n<h2 id=\"答用户问\"><a class=\"markdownIt-Anchor\" href=\"#答用户问\">#</a> 答用户问</h2>\n<h3 id=\"如何调整主键\"><a class=\"markdownIt-Anchor\" href=\"#如何调整主键\">#</a> 如何调整主键</h3>\n<p>点到 Query 选项卡</p>\n<h4 id=\"1-如果原先没有主键且需要增加的字段为-not-null可以执行下列命令\"><a class=\"markdownIt-Anchor\" href=\"#1-如果原先没有主键且需要增加的字段为-not-null可以执行下列命令\">#</a> 1. 如果原先没有主键，且需要增加的字段为 not null，可以执行下列命令</h4>\n<pre><code>ALTER TABLE `users` ADD PRIMARY KEY ( `name` )\n</code></pre>\n<h4 id=\"2-如果原先主键已存在目的是改变主键则执行如下步骤\"><a class=\"markdownIt-Anchor\" href=\"#2-如果原先主键已存在目的是改变主键则执行如下步骤\">#</a> 2. 如果原先主键已存在，目的是改变主键，则执行如下步骤</h4>\n<ul>\n<li>如果原主键有外键依赖，要先删除外键依赖；</li>\n</ul>\n<pre><code>alter table `FK_Table` drop foreign key FK_Name;（FK_Table 为有外键关系的表，FK_Name 为外键约束名）\n</code></pre>\n<ul>\n<li>如果原主键为自动递增，要先去掉自动递增：</li>\n</ul>\n<pre><code>alter table `users` modify `id` int(10) unsigned NOT NULL;（根据实际字段属性来）\n</code></pre>\n<ul>\n<li>再删除主键</li>\n</ul>\n<pre><code>alter table `users` drop primary key;\n</code></pre>\n<ul>\n<li>然后再增加主键</li>\n</ul>\n<pre><code>alter table `users` add primary key(`name`);\n</code></pre>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL3QvbXlzcWw=\">mysql</span></p>\n",
            "tags": [
                "爬虫"
            ]
        },
        {
            "id": "http://codebglh.github.io/hexo/hexo%E7%AE%80%E4%BB%8B/",
            "url": "http://codebglh.github.io/hexo/hexo%E7%AE%80%E4%BB%8B/",
            "title": "hexo简介",
            "date_published": "2020-04-12T12:46:25.000Z",
            "content_html": "<h1 id=\"用hexo搭建一个静态站点\"><a class=\"markdownIt-Anchor\" href=\"#用hexo搭建一个静态站点\">#</a> 用 hexo 搭建一个静态站点</h1>\n<h3 id=\"1下载必须文件\"><a class=\"markdownIt-Anchor\" href=\"#1下载必须文件\">#</a> 1. 下载必须文件</h3>\n<p>A.<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ub2RlanMub3JnL2VuLw==\">nodejs</span><br>\nB.<span class=\"exturl\" data-url=\"aHR0cDovL2dpdC1zY20uY29tLw==\">git</span><br>\nC.hexo</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g hexo-cli</pre></td></tr></table></figure><h3 id=\"2创建一个文件夹并在此文件夹中打开终端初始化hexo创建网页\"><a class=\"markdownIt-Anchor\" href=\"#2创建一个文件夹并在此文件夹中打开终端初始化hexo创建网页\">#</a> 2. 创建一个文件夹并在此文件夹中打开终端初始化 hexo 创建网页</h3>\n<p>第一步：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo init\t\t\t<span class=\"token comment\">#初始化文件夹</span></pre></td></tr></table></figure><p>第二步：</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo g      \t<span class=\"token comment\">#编译文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ hexo s\t\t\t\t<span class=\"token comment\">#本地部署</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>$ hexo d\t\t\t\t<span class=\"token comment\">#部署网页</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>$ hexo server\t\t<span class=\"token comment\">#本地部署但不生成文件可修改看变化</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>$ hexo clean\t\t<span class=\"token comment\">#清除垃圾文件</span></pre></td></tr></table></figure><h3 id=\"3部署\"><a class=\"markdownIt-Anchor\" href=\"#3部署\">#</a> 3. 部署</h3>\n<p>A. 部署到服务器</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>yum <span class=\"token function\">install</span> gcc -y\t\t\t\t\t\t\t  <span class=\"token comment\">#先安装好 Nginx 安装环境</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>yum <span class=\"token function\">install</span> pcre pcre-devel -y</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>yum <span class=\"token function\">install</span> zlib zlib-devel -y</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> http://nginx.org/download/nginx-1.16.0.tar.gz      <span class=\"token comment\">#下载</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">tar</span> zxvf nginx-1.16.0.tar.gz</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> nginx-1.16.0./configure --prefix<span class=\"token operator\">=</span>/usr/local/nginx</pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./configure --prefix<span class=\"token operator\">=</span>/usr/local/nginx <span class=\"token comment\">#编译</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">make</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">make</span> <span class=\"token function\">install</span>  <span class=\"token comment\">#安装</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">cd</span> /usr/local/nginx/sbin/./nginx B.  <span class=\"token comment\">#启动 nginx</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-sftp --save  <span class=\"token comment\">#首先得在 hexo 目录下安装 sftp 插件</span></pre></td></tr></table></figure><figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"sftp\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"192.168.0.100\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"root\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">pass</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"123456\"</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">remotePath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/usr/local/nginx/html\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">22</span> \t\t</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">### 然后在 _config.yml 中配置 deploy</span></pre></td></tr></table></figure><p>B. 部署到<a href=\"www.github.com\"> GitHub</a></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-deployer-git --save  <span class=\"token comment\">#先添加 git 插件</span></pre></td></tr></table></figure><figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"git\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">repo</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://github.com/ITAbyss/itabyss.github.io.git\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">branch</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"master\"</span></pre></td></tr></table></figure>",
            "tags": [
                "博客"
            ]
        }
    ]
}